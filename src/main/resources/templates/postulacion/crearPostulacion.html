<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Crear Postulación</title>
</head>

<body>
    
    <link rel="stylesheet" th:href="@{/css/postulacion/crearPostulacion.css}">
    <script th:src="@{/js/postulacion/crearPostulacion.js}" defer></script>
    <main class="main-content">
        <div class="form-container">
            <h1 class="form-title">Postular mi Startup</h1>

            <!-- Barra de progreso y pasos -->
            <div class="progress-container">
                <div class="progress">
                    <div class="progress-bar" role="progressbar" style="width: 20%" aria-valuenow="20" aria-valuemin="0"
                        aria-valuemax="100"></div>
                </div>
                <div class="steps-container">
                    <div class="step active" data-step="1">
                        1
                        <span class="step-label">Convocatoria</span>
                    </div>
                    <div class="step" data-step="2">
                        2
                        <span class="step-label">Proyecto</span>
                    </div>
                    <div class="step" data-step="3">
                        3
                        <span class="step-label">Equipo</span>
                    </div>
                    <div class="step" data-step="4">
                        4
                        <span class="step-label">Estado</span>
                    </div>
                    <div class="step" data-step="5">
                        5
                        <span class="step-label">Documentos</span>
                    </div>
                </div>
            </div>

            <form th:action="@{/crearPostulacion}" th:object="${postulacion}" method="post" class="needs-validation"
                novalidate>
                <input type="hidden" th:field="*{id}" /> <!-- Sección 1: Información de la convocatoria -->
                <div class="section-card active" data-section="1">
                    <h3 class="section-title">Información de la Convocatoria</h3>
                    <div class="convocatoria-card">
                        <h4 class="convocatoria-title" th:text="${convocatoriaSeleccionada.titulo}"></h4>
                        <p class="convocatoria-description" th:text="${convocatoriaSeleccionada.descripcion}"></p>
                        <div class="convocatoria-meta">
                            <span class="meta-tag">
                                <i class="fas fa-calendar"></i>
                                <span
                                    th:text="${#dates.format(convocatoriaSeleccionada.fechaFin, 'dd/MM/yyyy')}"></span>
                            </span>
                            <span class="meta-tag">
                                <i class="fas fa-tag"></i>
                                <span th:text="${convocatoriaSeleccionada.sectorObjetivo}"></span>
                            </span>
                        </div>
                    </div>
                    <input type="hidden" th:field="*{convocatoria.id}" th:value="${convocatoriaSeleccionada?.id}" />

                    <div class="form-navigation">
                        <button type="button" class="btn btn-primary btn-next">Siguiente <i
                                class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div> <!-- Sección 2: Información del Proyecto -->
                <div class="section-card" data-section="2">
                    <h3 class="section-title">Información del Proyecto</h3>

                    <div class="form-group">
                        <label for="nombreProyecto" class="form-label">Nombre del Proyecto</label>
                        <input type="text" class="form-control" id="nombreProyecto" th:field="*{nombreProyecto}"
                            required maxlength="100">
                        <div class="invalid-feedback">Por favor ingresa el nombre del proyecto.</div>
                    </div>

                    <div class="form-group">
                        <label for="startup" class="form-label">Tu Startup</label>
                        <select class="form-select" id="startup" th:field="*{startup}" required>
                            <option value="">Selecciona tu startup</option>
                            <option th:each="startup : ${startups}" th:value="${startup.id}"
                                th:text="${startup.nombreStartup}"></option>
                        </select>
                        <div class="invalid-feedback">Por favor selecciona tu startup.</div>
                    </div>

                    <div class="form-group">
                        <label for="problemaASolucionar" class="form-label">¿Qué problema soluciona tu
                            proyecto?</label>
                        <textarea class="form-control" id="problemaASolucionar" th:field="*{problemaASolucionar}"
                            required></textarea>
                        <div class="invalid-feedback">Por favor describe el problema que soluciona tu proyecto.</div>
                    </div>
                    <div class="form-group">
                        <label for="solucion" class="form-label">¿Cuál es tu solución?</label>
                        <textarea class="form-control" id="solucion" th:field="*{solucion}" required></textarea>
                        <div class="invalid-feedback">Por favor describe la solución propuesta.</div>
                    </div>

                    <div class="form-group">
                        <label for="clientesObjetivo" class="form-label">¿Quiénes son tus clientes objetivo?</label>
                        <textarea class="form-control" id="clientesObjetivo" th:field="*{clientesObjetivo}"
                            required></textarea>
                        <div class="invalid-feedback">Por favor describe tus clientes objetivo.</div>
                    </div>

                    <div class="form-group">
                        <label for="diferenciador" class="form-label">¿Qué hace diferente tu solución?</label>
                        <textarea class="form-control" id="diferenciador" th:field="*{diferenciador}"
                            required></textarea>
                        <div class="invalid-feedback">Por favor describe qué hace diferente tu solución.</div>
                    </div>

                    <div class="form-navigation">
                        <button type="button" class="btn btn-secondary btn-prev"><i class="fas fa-arrow-left"></i>
                            Anterior
                        </button>
                        <button type="button" class="btn btn-primary btn-next">Siguiente <i
                                class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div> <!-- Sección 3: Información del Equipo -->
                <div class="section-card" data-section="3">
                    <h3 class="section-title">Información del Equipo</h3>

                    <div class="form-group">
                        <label for="numeroIntegrantes" class="form-label">Número de Integrantes</label>
                        <input type="number" class="form-control" id="numeroIntegrantes" th:field="*{numeroIntegrantes}"
                            required min="1">
                        <div class="invalid-feedback">Por favor ingresa el número de integrantes.</div>
                    </div>

                    <div class="form-group">
                        <label for="dineroVentas" class="form-label">Dinero en Ventas (USD)</label>
                        <input type="number" class="form-control" id="dineroVentas" th:field="*{dineroVentas}" required
                            step="0.01" min="0">
                        <div class="invalid-feedback">Por favor ingresa el monto de ventas.</div>
                    </div>

                    <div class="form-group">
                        <label for="rolesIntegrantes" class="form-label">Roles de los Integrantes</label>
                        <textarea class="form-control" id="rolesIntegrantes" th:field="*{rolesIntegrantes}" required
                            placeholder="Ej: CEO, CTO, CMO, Desarrollador, Diseñador, etc."></textarea>
                        <div class="invalid-feedback">Por favor describe los roles de los integrantes.</div>
                    </div>

                    <div class="form-group">
                        <label for="habilidadesEquipo" class="form-label">Habilidades del Equipo</label>
                        <textarea class="form-control" id="habilidadesEquipo" th:field="*{habilidadesEquipo}"
                            required></textarea>
                        <div class="invalid-feedback">Por favor describe las habilidades del equipo.</div>
                    </div>

                    <div class="form-navigation">
                        <button type="button" class="btn btn-secondary btn-prev"><i class="fas fa-arrow-left"></i>
                            Anterior
                        </button>
                        <button type="button" class="btn btn-primary btn-next">Siguiente <i
                                class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div> <!-- Sección 4: Estado del Proyecto -->
                <div class="section-card" data-section="4">
                    <h3 class="section-title">Estado del Proyecto</h3>

                    <div class="form-group">
                        <label for="etapaProyecto" class="form-label">Etapa del Proyecto</label>
                        <select class="form-select" id="etapaProyecto" th:field="*{etapaProyecto}" required>
                            <option value="">Selecciona una etapa</option>
                            <option value="Idea">Ideación</option>
                            <option value="Prototipo">Prototipo</option>
                            <option value="MVP">MVP</option>
                            <option value="Tracción Inicial">Tracción Inicial</option>
                            <option value="Crecimiento">Crecimiento</option>
                            <option value="Expansión">Expansión</option>
                        </select>
                        <div class="invalid-feedback">Por favor selecciona la etapa del proyecto.</div>
                    </div>

                    <div class="form-group">
                        <label for="fechaPostulacion" class="form-label">Fecha de Postulación</label>
                        <input type="date" class="form-control" id="fechaPostulacion" th:field="*{fechaPostulacion}"
                            required>
                        <div class="invalid-feedback">Por favor selecciona la fecha de postulación.</div>
                    </div>

                    <div class="form-group">
                        <label for="necesidadesActuales" class="form-label">Necesidades Actuales</label>
                        <textarea class="form-control" id="necesidadesActuales" th:field="*{necesidadesActuales}"
                            rows="3" required placeholder="Ej: financiamiento, mentorías, conexiones, etc."></textarea>
                        <div class="invalid-feedback">Por favor describe las necesidades actuales.</div>
                    </div>

                    <div class="form-navigation">
                        <button type="button" class="btn btn-secondary btn-prev"><i class="fas fa-arrow-left"></i>
                            Anterior
                        </button>
                        <button type="button" class="btn btn-primary btn-next">Siguiente <i
                                class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div> <!-- Sección 5: Enlaces y Documentos -->
                <div class="section-card" data-section="5">
                    <h3 class="section-title">Enlaces y Documentos</h3>                    <div class="form-group">
                        <label for="fotoUrl" class="form-label">URL de la Foto</label>
                        <input type="url" class="form-control" id="fotoUrl" th:field="*{fotoUrl}" readonly>
                        <small class="form-text text-muted">La URL de la foto se cargará automáticamente según la Startup seleccionada.</small>
                    </div>

                    <div class="form-group">
                        <label for="enlacePaginaWeb" class="form-label">Enlace a Página Web</label>
                        <input type="url" class="form-control" id="enlacePaginaWeb" th:field="*{enlacePaginaWeb}">
                    </div>

                    <div class="form-group">
                        <label for="pitch" class="form-label">Pitch (URL)</label>
                        <input type="url" class="form-control" id="pitch" th:field="*{pitch}">
                    </div>

                    <div class="form-group">
                        <label for="documentoPropuesta" class="form-label">Documento de Propuesta (URL)</label>
                        <input type="url" class="form-control" id="documentoPropuesta" th:field="*{documentoPropuesta}">
                    </div>

                    <div class="form-group">
                        <label for="videoPitch" class="form-label">Video Pitch (URL)</label>
                        <input type="url" class="form-control" id="videoPitch" th:field="*{videoPitch}">
                    </div>

                    <div class="form-group">
                        <label for="enlacesAdicionales" class="form-label">Enlaces Adicionales</label>
                        <textarea class="form-control" id="enlacesAdicionales" th:field="*{enlacesAdicionales}" rows="3"
                            placeholder="Ej: GitHub, LinkedIn, presentaciones, etc."></textarea>
                    </div>

                    <div class="form-navigation">
                        <button type="button" class="btn btn-secondary btn-prev"><i class="fas fa-arrow-left"></i>
                            Anterior
                        </button>
                        <button type="submit" class="btn btn-success"><i class="fas fa-check"></i> Enviar Postulación
                        </button>
                    </div>
                </div>
            </form>

            <!-- Link para cancelar y volver al listado -->
            <div class="mt-3 text-center">
                <a th:href="@{/listarConvocatorias}" class="btn btn-link">Cancelar y volver al listado</a>
            </div>
        </div>
    </main>
</body>

</html>